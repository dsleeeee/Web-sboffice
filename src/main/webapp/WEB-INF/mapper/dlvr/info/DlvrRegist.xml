<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.co.solbipos.dlvr.info.regist.service.impl.DlvrRegistMapper">
    <select id="getDlvrManageList" parameterType="dlvrRegistVO" resultType="DefaultMap">
        /* DlvrRegistMapper.getDlvrManageList */
        SELECT STORE_CD
               , DLVR_LZONE_CD
               , DLVR_LZONE_NM
               , PAGE_NO
               , EMP_NO
               , IN_FG
               , USE_YN
               , REG_DT
               , REG_ID
               , MOD_DT
               , MOD_ID
          FROM TB_MS_DELIVERY_LZONE
         WHERE USE_YN = 'Y'
    </select>

    <select id="getNewDlvrLzoneCd" parameterType="dlvrRegistVO" resultType="String">
        /* DlvrRegistMapper.getNewDlvrLzoneCd */
        SELECT LPAD( NVL(MAX(DLVR_LZONE_CD), 0) + 1, 3, '0') AS DLVR_LZONE_CD
          FROM TB_MS_DELIVERY_LZONE
         WHERE STORE_CD = #{storeCd}
    </select>

    <insert id="insertDlvrRegistInfo" parameterType="dlvrRegistVO" >
        /* DlvrRegistMapper.insertDlvrRegistInfo */
        <![CDATA[
        INSERT INTO TB_MS_DELIVERY_LZONE (
            STORE_CD
            , DLVR_LZONE_CD
            , DLVR_LZONE_NM
            , PAGE_NO
            , EMP_NO
            , IN_FG
            , USE_YN
            , REG_DT
            , REG_ID
            , MOD_DT
            , MOD_ID
        ) VALUES (
            #{storeCd}
            , #{dlvrLzoneCd}
            , #{dlvrLzoneNm}
            , #{pageNo}
            , #{empNo}
            , #{inFg}
            , #{useYn}
            , #{regDt}
            , #{regId}
            , #{modDt}
            , #{modId}
        )
        ]]>
    </insert>

    <update id="updateDlvrRegistInfo" parameterType="dlvrRegistVO">
        /* DlvrRegistMapper.updateDlvrRegistInfo */
        UPDATE TB_MS_DELIVERY_LZONE tmm
           SET
             DLVR_LZONE_NM = #{dlvrLzoneNm}
            , PAGE_NO = #{pageNo}
            , EMP_NO = #{empNo}
            , IN_FG = #{inFg}
            , USE_YN = #{useYn}
            , REG_DT = #{regDt}
            , REG_ID = #{regId}
            , MOD_DT = #{modDt}
            , MOD_ID = #{modId} 
         WHERE STORE_CD = #{storeCd}
         AND DLVR_LZONE_CD = #{dlvrLzoneCd}
    </update>

    <delete id="deleteDlvrRegistInfo" parameterType="dlvrRegistVO">
      /* DlvrRegistMapper.deleteDlvrRegistInfo */
      UPDATE TB_MS_DELIVERY_LZONE
         SET USE_YN = #{useYn}
       WHERE STORE_CD = #{storeCd}
         AND DLVR_LZONE_CD = #{dlvrLzoneCd}
    </delete>

</mapper>
