<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.co.solbipos.membr.info.point.service.impl.MemberPointMapper">

  <!-- 회원등급 리스트 조회-->
  <!--
      TABLE    : TB_MB_MEMBER_CLASS
      COMMENTS : 회원등급목록 조회
  -->
  <select id="getMemberPointList" parameterType="memberPointVO" resultType="DefaultMap">
      /* MemberClassMapper.getMemberClassList */
      SELECT
          MEMBR_ORGN_CD
          ,MEMBR_NO
          ,AVABL_POINT
      FROM
          TB_MB_MEMBER_POINT
  </select>

  <insert id="adjustAll" parameterType="DefaultMap">
    INSERT INTO
      TB_MB_MEMBER_POINT_HIST
        (MEMBR_ORGN_CD,
        MEMBR_NO,
        CHG_DATE,
        CHG_SEQ,
        POINT_CHG_FG,
        CHG_POINT,
        REMARK,
        ORGN_APPR_NO,
        REG_DT,
        REG_ID,
        MOD_DT,
        MOD_ID)
    VALUES (
        #{membrOrgnCd},
        #{membrNo},
        #{chgDate},
        #{chgSeq},
        3,
        #{totAjdPoint},
        #{adjustPartRemark},
        #{orgnApprNo},
        #{regDt},
        #{regId},
        #{modDt},
        #{modId}
    )
  </insert>

</mapper>
